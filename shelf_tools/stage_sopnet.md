#choose the SOP / OBJ context
def find_geo_container():
    #get /obj
    obj_node = hou.node('/obj')

    #check for geo containers inside /obj
    for child in obj_node.children():        
        if child.type().name() == 'geo':
            return child

    #make new container if none
    print("making new geo containers")
    return obj_node.createNode('geo', 'background_grid_autogenerated')

def create_renderstuff():
    #get into container from above function
    geo_container = find_geo_container()

    #grid
    grid = geo_container.createNode('grid')
        #grid parameters
    grid.parm('sizex').set(20)
    grid.parm('sizey').set(20)
    grid.parm('rows').set(70)
    grid.parm('cols').set(2)
    grid.parm('tz').set(-2.3)
    
    #bend
    bend = geo_container.createNode('bend')
        #bend parameters
    bend.parm('dodeform').set(True)
    bend.parm('limit_deformation').set(True)
    bend.parm('enablebend').set(True)
    bend.parm('bend').set(90)
    bend.parm('enablelengthscale').set(True)
    bend.parm('lengthscale').set(0.38)
    bend.parm('dirz').set(-1)
    bend.parm('length').set(4.98)
    
    #xform
    transform = geo_container.createNode('xform')
    transform.parm('tz').set(-2.5)
    
    #labs_autouv
    uv = geo_container.createNode('labs::autouv')
    
    #uv_transform
    uvxform = geo_container.createNode('uvtransform::2.0')
    uvxform.parm('sx').set(1.5)
    uvxform.parm('sy').set(1.5)    
    uvxform.parm('sz').set(1.5)
    
    #out_null
    null = geo_container.createNode('null', 'OUT_BACKGROUND')
    
    #wire them
    bend.setInput(0, grid, 0)
    transform.setInput(0, bend, 0) 
    uv.setInput(0, transform, 0)  
    uvxform.setInput(0, uv, 0)
    null.setInput(0, uvxform, 0)
    
    #Align them
    geo_container.layoutChildren()
    
        

create_renderstuff()
